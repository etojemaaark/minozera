"use strict";

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _typeof(obj) { "@babel/helpers - typeof"; if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

!function (t, e) {
  "object" == (typeof exports === "undefined" ? "undefined" : _typeof(exports)) && "object" == (typeof module === "undefined" ? "undefined" : _typeof(module)) ? module.exports = e() : "function" == typeof define && define.amd ? define([], e) : "object" == (typeof exports === "undefined" ? "undefined" : _typeof(exports)) ? exports.scrollSpy = e() : t.scrollSpy = e();
}(window, function () {
  return function (t) {
    var e = {};

    function o(n) {
      if (e[n]) return e[n].exports;
      var r = e[n] = {
        i: n,
        l: !1,
        exports: {}
      };
      return t[n].call(r.exports, r, r.exports, o), r.l = !0, r.exports;
    }

    return o.m = t, o.c = e, o.d = function (t, e, n) {
      o.o(t, e) || Object.defineProperty(t, e, {
        enumerable: !0,
        get: n
      });
    }, o.r = function (t) {
      "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(t, Symbol.toStringTag, {
        value: "Module"
      }), Object.defineProperty(t, "__esModule", {
        value: !0
      });
    }, o.t = function (t, e) {
      if (1 & e && (t = o(t)), 8 & e) return t;
      if (4 & e && "object" == _typeof(t) && t && t.__esModule) return t;
      var n = Object.create(null);
      if (o.r(n), Object.defineProperty(n, "default", {
        enumerable: !0,
        value: t
      }), 2 & e && "string" != typeof t) for (var r in t) {
        o.d(n, r, function (e) {
          return t[e];
        }.bind(null, r));
      }
      return n;
    }, o.n = function (t) {
      var e = t && t.__esModule ? function () {
        return t.default;
      } : function () {
        return t;
      };
      return o.d(e, "a", e), e;
    }, o.o = function (t, e) {
      return Object.prototype.hasOwnProperty.call(t, e);
    }, o.p = "", o(o.s = 0);
  }([function (t, e, o) {
    t.exports = function (t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      var n = new (o(1))(t, e);
      return window.onload = function () {
        n.onScroll();
      }, window.addEventListener("scroll", function () {
        n.onScroll();
      }), n;
    };
  }, function (t, e) {
    t.exports = /*#__PURE__*/function () {
      function _class() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "#navMain";
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

        _classCallCheck(this, _class);

        if (!t) throw new Error("First argument cannot be empty");
        if (!("string" == typeof t || t instanceof HTMLElement)) throw new TypeError("menu can be either string or an instance of HTMLElement");
        if ("object" != _typeof(e)) throw new TypeError("options can only be of type object");
        this.menuList = t instanceof HTMLElement ? t : document.querySelector(t), this.options = Object.assign({}, {
          sectionSelector: "section",
          targetSelector: "a",
          offset: 0,
          hrefAttribute: "href",
          activeClass: "active"
        }, e), this.sections = document.querySelectorAll(this.options.sectionSelector);
      }

      _createClass(_class, [{
        key: "onScroll",
        value: function onScroll() {
          var t = this.getCurrentSection(),
              e = this.getCurrentMenuItem(t);
          e && (this.removeCurrentActive({
            ignore: e
          }), this.setActive(e));
        }
      }, {
        key: "getCurrentSection",
        value: function getCurrentSection() {
          for (var _t = 0; _t < this.sections.length; _t++) {
            var _e = this.sections[_t],
                o = _e.offsetTop,
                n = o + _e.offsetHeight,
                r = (document.documentElement.scrollTop || document.body.scrollTop) + this.options.offset;
            if (r >= o && r < n) return _e;
          }
        }
      }, {
        key: "getCurrentMenuItem",
        value: function getCurrentMenuItem(t) {
          if (!t) return;
          var e = t.getAttribute("id");
          return this.menuList.querySelector("[".concat(this.options.hrefAttribute, "=\"#").concat(e, "\"]"));
        }
      }, {
        key: "setActive",
        value: function setActive(t) {
          if (!t.classList.contains(this.options.activeClass)) {
            this.options.activeClass.trim().split(" ").forEach(function (e) {
              return t.classList.add(e);
            });
          }
        }
      }, {
        key: "removeCurrentActive",
        value: function removeCurrentActive() {
          var _this = this;

          var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {
            ignore: null
          };
          var _this$options = this.options,
              e = _this$options.hrefAttribute,
              o = _this$options.targetSelector;
          this.menuList.querySelectorAll("".concat(o, ":not([").concat(e, "=\"").concat(t.ignore.getAttribute(e), "\"])")).forEach(function (t) {
            _this.options.activeClass.trim().split(" ").forEach(function (e) {
              return t.classList.remove(e);
            });
          });
        }
      }]);

      return _class;
    }();
  }]);
});